@using SG2.CORE.MODAL.DTO.Customers;
@using SG2.CORE.COMMON;
@model SG2.CORE.MODAL.DTO.Customers.SocialProfileDTO
@{

    ViewBag.Title = "Basic Profile";
    Layout = "~/Views/Shared/_Layout_LoggedInStack.cshtml";
    var custDto = (CustomerDTO)ViewBag.CustomerDTO;

    var currentUser = (CustomerDTO)ViewBag.CurrentUser;

    ViewBag.socialProfile = Model.SocialProfile;

    ViewBag.PlanName = Model.CurrentPaymentPlan == null ? "FREE" : Model.CurrentPaymentPlan.PlanName;
   
    var ProfileStatus = "";
    if (Model.SocialProfile.StatusId == (int)GlobalEnums.PlanSubscription.Active)
    {
        ProfileStatus = "Active (Free)";
    }
    else if (Model.SocialProfile.StatusId == (int)GlobalEnums.PlanSubscription.ActivePlan)
    {
        ProfileStatus = "Active (Plan)";
    }
    else if (Model.SocialProfile.StatusId == (int)GlobalEnums.PlanSubscription.canceled)
    {
        ProfileStatus = "Cancelled";
    }
    else if (Model.SocialProfile.StatusId == (int)GlobalEnums.PlanSubscription.Unsubscribe)
    {
        ProfileStatus = "Unsubscribed";
    }


    var DeviceStatus = "Not Connected";

    var DeviceIMEI = "Not Connected";

    if (Model.SocialProfile.DeviceStatus.HasValue)
    {
        if (Model.SocialProfile.DeviceStatus.Value == (int)GlobalEnums.DeviceStatus.Connected)
        {
            DeviceStatus = "Device Connected - Last sync on :" + Model.SocialProfile.LastConnectedDateTime.Value.ToString("dd MMM yyyy") + " " + Model.SocialProfile.LastConnectedDateTime.Value.ToUniversalTime().ToShortTimeString() + " UTC";
            DeviceIMEI = Model.SocialProfile.DeviceIMEI;

        }
    }



}


@section styles{

    <link href="~/Content/app-assets/vendors/css/forms/tags/tagging.css" rel="stylesheet" />
    <link href="~/Content/app-assets/css/pincode.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="~/Content/app-assets/css/plugins/forms/validation/form-validation.css">
    <style>
        .pincode-input-text {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

    </style>
}

@section profileheader{
    @Html.Partial("Partial/_PartialProfileHeader", Model)
}

<form class="form" id="formbasic" method="post" action="Basic" novalidate>

    @Html.HiddenFor(m => m.SocialProfile.SocialProfileId)
    @Html.HiddenFor(m => m.SocialProfile_Instagram_TargetingInformation.TargetingInformationId)

    <!-- BEGIN: Content-->
    <div class="app-content container center-layout mt-2">
        <div class="content-wrapper">

            <div class="content-body">
                <!-- Basic form layout section start -->
                <section id="horizontal-form-layouts">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title" id="horz-layout-basic">IG Account Info</h4>

                                </div>
                                <div class="card-content collpase show">
                                    <div class="card-body">


                                        <div class="form-body">
                                            @if (Model.socialcustomer.IsBroker.HasValue && Model.socialcustomer.IsBroker.Value == true)
                                            {
                                                <h4 class="form-section"><i class="ft-user"></i> Status</h4>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label class="label-control" for="projectinput1">App Connection Status</label>

                                                            <input type="text" class="form-control" value="@DeviceStatus" readonly="readonly" id="appstatus">

                                                        </div>
                                                    </div>


                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label class="label-control" for="projectinput2">Device Bin Location</label>

                                                            @Html.EditorFor(m => m.SocialProfile.DeviceBinLocation, new { htmlAttributes = new { @class = "form-control", placeholder = "Enter in where your mobile device is usually located when in operation" } })

                                                        </div>
                                                    </div>


                                                </div>


                                            }
                                            <h4 class="form-section"><i class="ft-user"></i> Social Profile Details</h4>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="label-control" for="projectinput1">Your Instagram Username</label>


                                                        @Html.EditorFor(m => m.SocialProfile.SocialUsername, new { htmlAttributes = new { @class = "form-control", required = "required", data_validation_required_message = "This field is required" } })

                                                    </div>
                                                </div>
                                                @if (Model.socialcustomer.IsBroker.HasValue && Model.socialcustomer.IsBroker.Value == true)
                                                {
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label class="label-control" for="projectinput2">Instagram Password</label>

                                                            <input type="text" class="form-control" id="firstName1" readonly="readonly" value="@Model.SocialProfile.SocialPassword">

                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 pincodecontainer">
                                                    <div class="form-group">
                                                        <label class="label-control" for="projectinput1">Pin Code</label>

                                                        <input readonly type="text" class="form-control" id="pincode" value="@Model.SocialProfile.PinCode">

                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 text-center">
                                                    <div class="form-actions">
                                                        @*<button type="button" class="btn btn-warning mr-1">
                                                                <i class="ft-x"></i> Cancel
                                                            </button>*@
                                                        <button type="submit" class="btn btn-primary">
                                                            <i class="fa fa-check-square-o"></i> Save
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            @if (Model.socialcustomer.IsBroker.HasValue && Model.socialcustomer.IsBroker.Value == true)
                                            {
                                                <h4 class="form-section"><i class="ft-user"></i>Device Push Notifications (Coming Soon)</h4>
                                                <div class="row">
                                                    <div class="col-sm-12 col-lg-3">
                                                        <a href="#" class="btn btn-block btn-primary " style="width:100%">Alert</a>
                                                    </div>


                                                    <div class="col-sm-12 col-lg-3">
                                                        <a href="#" class="btn btn-block btn-primary  " style="background-color:blueviolet;width:100%">Play Alarm</a>
                                                    </div>

                                                    <div class="col-sm-12 col-lg-3">
                                                        <a href="#" class="btn btn-block btn-primary  " style="background-color:blueviolet;width:100%">Get latest Log</a>
                                                    </div>

                                                    <div class="col-sm-12 col-lg-3">
                                                        <a href="#" class="btn btn-block btn-primary  " style="background-color:blueviolet;width:100%">Restart App</a>
                                                    </div>

                                                </div>
                                            }

                                        </div>

                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>

                </section>
                <!-- // Basic form layout section end -->
            </div>
        </div>
    </div>
    <!-- END: Content-->
</form>


@section Scripts{
    <script src="~/Content/app-assets/js/scripts/bootstrap-pincode-input.js"></script>
    <script src="~/Content/app-assets/vendors/js/forms/tags/tagging.min.js"></script>
    <script src="~/Content/app-assets/vendors/js/forms/validation/jqBootstrapValidation.js"></script>
    <script src="~/Content/app-assets/vendors/js/extensions/sweetalert.min.js"></script>
    <script src="~/Content/app-assets/js/scripts/extensions/sweet-alerts.js"></script>
    <script>
        $(document).ready(function () {
            /*******************************
            *       Simple Options         *
            *******************************/
            $(".edit-on-delete").tagging({
                "edit-on-delete": false,
            });

            @if (ViewBag.success == 1) {
                @:swal("Success!", "You have successfully updated the profile!", "success");
            }

            $("input,select,textarea").not("[type=submit]").jqBootstrapValidation();

            $('#pincode').pincodeInput({ hidedigits: false, inputs: 6 }).disable();

            });
    </script>

}
